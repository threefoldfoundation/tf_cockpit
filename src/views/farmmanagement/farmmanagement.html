<section class="farmmanagement">

  <!-- <v-row align="centered" justify="center" class="grey--text lighten-5 pb-5 mb-5">
      This will be available soon..
    </v-row> -->
  <v-row class="my-3 mx-1">
    <v-card style="width: 100%;">
      <v-card-title primary-title class="primary py-3 mb-5 white--text">
        <v-icon color="white" left>fas fa-server</v-icon>
        My Farms
        <v-btn text icon dark class="ml-2">
          <v-icon>fas fa-plus</v-icon>
        </v-btn>
        <v-spacer></v-spacer>

        <v-col cols="12" sm="3"></v-col>
        <v-text-field dark v-model="searchFarms" append-icon="fa-search" label="Search" single-line hide-details>
        </v-text-field>
        </v-col>
      </v-card-title>
      <v-card-text>
        <v-row>
          <v-col>
            <v-data-table item-key="name" :search="searchFarms" :headers="headers" :items="farms" :items-per-page="10">
              <template v-slot:item.action="{ item }">
                <v-icon small class="mr-2" @click="viewNodes(item)" >
                  fas fa-eye
                </v-icon>
                <v-icon small class="mr-2" @click="viewSettings(item)">
                    fas fa-cog
                </v-icon>
              </template>
            </v-data-table>
          </v-col>
        </v-row>
      </v-card-text>
    </v-card>
    </v-flex>
  </v-row>
  <v-row>
    <v-flex d-flex class="mr-2">


      <v-dialog v-model="settingsDialog" scrollable>
      <v-card style="width: 100%;">
        <v-card-title primary-title class="primary py-3 mb-5 white--text">
          <v-icon color="white" left>fas fa-server</v-icon>
          Farm Settings - {{farmToEdit.name}}
          <v-spacer />
          <v-btn dark text class="mr-3" @click="settingsDialog = false">Cancel</v-btn>
          <v-btn dark text color="secondary" class="mr-3" @click="settingsDialog = false">Save</v-btn>
        </v-card-title>
        <v-card-text>
          <v-row>
            <v-col>
              <h2>Pricing</h2>
              <br>
              <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="computeUnit" label="Compute unit">
              </v-text-field>
              <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="memoryUnit" label="Memory unit">
              </v-text-field>
              <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="ssdUnit" label="SSD unit">
              </v-text-field>
              <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="hddUnit" label="HDD unit">
              </v-text-field>
            </v-col>

            <v-col colls="6">
              <h2>Public information</h2>
              <br>
              <v-text-field v-model="farmToEdit.farmId" label="3bot ID" disabled></v-text-field>
              <v-text-field v-model="farmToEdit.name" label="Farm name"></v-text-field>
              <v-textarea counter label="Farm description" :rules="farmDescriptionRules" :value="farmToEdit.desc">
              </v-textarea>

              <v-text-field v-model="farmLocation" label="Farm location"></v-text-field>

              <v-text-field v-model="farmEmail" label="Email"></v-text-field>

              <h2>Private information</h2> <br>
              <v-text-field v-model="VAT" label="VAT number"></v-text-field>

              <v-text-field v-model="companyRegistrationNumber" label="Company Registration Number"></v-text-field>
            </v-col>
          </v-row>
        </v-card-text>
      </v-card>
      </v-dialog>
    </v-flex>
  </v-row>

  <v-row class="my-3 mx-1">
      <v-card v-if="!farmSelected.name" style="width: 100%;">
          <v-card-title primary-title class="primary py-3 mb-5 white--text">
              <v-icon color="white" left>fas fa-server</v-icon>
              Nodes in farm
              <v-spacer />
          </v-card-title>
          <v-card-text>
              <p class="text-center">please select a farm to view the nodes.</p>
          </v-card-text>
      </v-card>
      <v-card style="width: 100%;" v-if="farmSelected.name">
        <v-card-title primary-title class="primary py-3 mb-5 white--text">
          {{farmSelected.name}} - Nodes


          <v-spacer />
          <v-col cols="12" sm="3"></v-col>
          <v-text-field dark v-model="searchNodes" append-icon="fa-search" label="Search" single-line hide-details>
          </v-text-field>
          </v-col>
          <v-menu v-model="menu" :close-on-content-click="false" :nudge-width="200" offset-x>
            <template v-slot:activator="{ on }">
              <v-badge overlap v-model="showBadge" color="red">
                <template v-slot:badge>
                  <span>1</span>
                </template>
                <v-btn text icon color="white" dark v-on="on">
                  <v-icon>far fa-bell mr-2</v-icon>
                </v-btn>
              </v-badge>
            </template>
  
            <v-card>
              <v-list>
                <v-list-item>
                  <v-list-item-avatar>
                    <v-icon>fas fa-plus</v-icon>
                  </v-list-item-avatar>
  
                  <v-list-item-content>
                    <v-list-item-title>A new node wants to join your farm</v-list-item-title>
                  </v-list-item-content>
  
                  <v-list-item-action>
                    <v-btn :class="fav ? 'red--text' : ''" icon @click="fav = !fav">
                    </v-btn>
                  </v-list-item-action>
                </v-list-item>
              </v-list>
  
              <v-divider></v-divider>
  
              <v-list>
                <v-list-item>
                  <v-list-item-title>Node Id: Lochristi34</v-list-item-title>
  
                </v-list-item>
                <v-list-item>
                  <v-list-item-title>Node name: Lochristi Node 34</v-list-item-title>
  
                </v-list-item>
              </v-list>
  
              <v-card-actions>
                <div class="flex-grow-1"></div>
  
                <v-btn text @click="menu = false">Deny</v-btn>
                <v-btn color="primary" text @click="menu = false">Allow</v-btn>
              </v-card-actions>
            </v-card>
          </v-menu>
  
        </v-card-title>
  
        <v-card-text>
          <v-flex class="ml-3">
            <v-layout column justify-space-around>
              <v-data-table show-expand :search="searchNodes" item-key="name" :headers="nodeHeaders" :items="nodeItems" :items-per-page="10"
                single-expand :expanded.sync="expanded">
                
                <template v-slot:expanded-item="{ headers }">
                  <!-- <v-chip :color="getColor(item.status)" dark>{{ item.status }}</v-chip> -->
                  
                  <td :colspan="headers.length">
                    <v-layout class="py-3" row wrap align-center>
                      farmer name / link <br>
                      node specifics <br>
                      CU pricing <br>
                      SU procing <br>
                      Nu pricing <br>
                      SLA
  
                    </v-layout>
                  </td>
                </template>
              </v-data-table>
              <!-- <v-layout v-for="(item, i) in items" :key="i">
                    <v-flex xs3>
                      Name
                    </v-flex>
                    <v-flex>
                      {{item.name}}
                    </v-flex>
                  </v-layout> -->
            </v-layout>
          </v-flex>
        </v-card-text>
      </v-card>
    </v-row>


</section>