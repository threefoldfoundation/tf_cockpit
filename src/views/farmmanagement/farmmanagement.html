<section class="farmmanagement">
  <v-row class="my-3 mx-1">
    <v-card style="width: 100%;">
      <v-card-title primary-title class="primary py-3 mb-5 white--text">
        <v-icon small color="white" left>fas fa-server</v-icon>
        My Farms
        <v-btn text icon dark class="ml-2 secondary" @click="addFarmDialog = true">
          <v-icon small>fas fa-plus</v-icon>
        </v-btn>
        <v-spacer></v-spacer>

        <v-col cols="12" sm="3"></v-col>
        <v-text-field dark class="pt-0" v-model="searchFarms" append-icon="fa-search" label="Search" single-line
          hide-details>
        </v-text-field>
        </v-col>
      </v-card-title>
      <v-card-text>
        <v-row>
          <v-col>
            <v-data-table item-key="name" :search="searchFarms" :headers="headers" :items="farms" :items-per-page="10">
              <template v-slot:item.action="{ item }">
                <v-icon small class="mr-2" @click="viewNodes(item)">
                  fas fa-eye
                </v-icon>
                <v-icon small class="mr-2" @click="viewSettings(item)">
                  fas fa-cog
                </v-icon>
              </template>
            </v-data-table>
          </v-col>
        </v-row>
      </v-card-text>
    </v-card>
    </v-flex>
  </v-row>
  <v-row class="my-3 mx-1">
    <v-card v-if="!farmSelected.name" style="width: 100%;">
      <v-card-title primary-title class="primary py-3 mb-5 white--text">
        <v-icon small color="white" left>fas fa-server</v-icon>
        Nodes in farm
        <v-spacer />
      </v-card-title>
      <v-card-text>
        <p class="text-center">please select a farm to view the nodes.</p>
      </v-card-text>
    </v-card>
    <v-card style="width: 100%;" v-if="farmSelected.name">
      <v-card-title primary-title class="primary py-3 mb-5 white--text">
        <v-icon small color="white" left>fas fa-server</v-icon>
        {{farmSelected.name}} - Nodes


        <v-spacer />
        <v-col cols="12" sm="3"></v-col>
        <v-text-field dark class="pt-0" v-model="searchNodes" append-icon="fa-search" label="Search" single-line
          hide-details>
        </v-text-field>
        </v-col>
      </v-card-title>

      <v-card-text>
        <v-flex class="ml-3">
          <v-layout column justify-space-around>
            <v-data-table show-expand :search="searchNodes" item-key="name" :headers="nodeHeaders" :items="nodeItems"
              :items-per-page="10" single-expand :expanded.sync="expanded">

              <template v-slot:expanded-item="{ headers }">
                <!-- <v-chip :color="getColor(item.status)" dark>{{ item.status }}</v-chip> -->

                <td :colspan="headers.length">
                  <v-layout class="py-3" row wrap align-center>
                    farmer name / link <br>
                    node specifics <br>
                    CU pricing <br>
                    SU procing <br>
                    Nu pricing <br>
                    SLA

                  </v-layout>
                </td>
              </template>
            </v-data-table>
            <!-- <v-layout v-for="(item, i) in items" :key="i">
                    <v-flex xs3>
                      Name
                    </v-flex>
                    <v-flex>
                      {{item.name}}
                    </v-flex>
                  </v-layout> -->
          </v-layout>
        </v-flex>
      </v-card-text>
    </v-card>
  </v-row>

  <v-dialog v-model="settingsDialog" scrollable>
    <v-card style="width: 100%;">
      <v-card-title primary-title class="primary py-3 mb-5 white--text">
        <v-icon color="white" left>fas fa-server</v-icon>
        Farm Settings - {{farmToEdit.name}}
      </v-card-title>
      <v-card-text>
        <v-row>
          <v-col>
            <h2>Pricing</h2>
            <br>
            <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="computeUnit" label="Compute unit">
            </v-text-field>
            <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="memoryUnit" label="Memory unit">
            </v-text-field>
            <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="ssdUnit" label="SSD unit">
            </v-text-field>
            <v-text-field prefix="$" type="number" step="0.01" min="0" v-model="hddUnit" label="HDD unit">
            </v-text-field>
          </v-col>

          <v-col colls="6">
            <h2>Public information</h2>
            <br>
            <v-text-field v-model="farmToEdit.farmId" label="3bot ID" disabled></v-text-field>
            <v-text-field v-model="farmToEdit.name" label="Farm name"></v-text-field>
            <v-textarea counter label="Farm description" :rules="farmDescriptionRules" :value="farmToEdit.desc">
            </v-textarea>

            <v-text-field v-model="farmLocation" label="Farm location"></v-text-field>

            <v-text-field v-model="farmEmail" label="Email"></v-text-field>

            <h2>Private information</h2> <br>
            <v-text-field v-model="VAT" label="VAT number"></v-text-field>

            <v-text-field v-model="companyRegistrationNumber" label="Company Registration Number"></v-text-field>

            <v-text-field v-model="walletAddress" label="Wallet address"></v-text-field>

          </v-col>
        </v-row>
      </v-card-text>
      <v-card-actions>
        <v-spacer></v-spacer>
          <v-btn text class="mr-3" @click="addFarmDialog = false">Cancel</v-btn>
          <v-btn text color="secondary" class="mr-3" @click="addFarmDialog = false">Save</v-btn>
      </v-card-actions>
    </v-card>
  </v-dialog>
  <v-dialog v-model="addFarmDialog" scrollable max-width="700px">
    <v-card style="width: 100%;">
      <v-card-title primary-title class="primary py-3 mb-5 white--text">
        <v-icon color="white" left>fas fa-server</v-icon>
        Add a farm
        <v-spacer />
        
      </v-card-title>
      <v-card-text>
        <v-text-field label="Farm name"></v-text-field>
        <v-text-field label="Organization ID"></v-text-field>
        <v-text-field label="TFT Wallet address"></v-text-field>
        <v-checkbox
          label="Check me if you don't want to provide a Wallet Address now. Without wallet, you won't be paid.">
        </v-checkbox>
        
        <GmapMap :center="{lat:38.884629, lng:1.389934}" map-type-id="satellite" :zoom="2" style="width: 100%; height: 300px">
          <!-- <GmapMarker :key="index" v-for="(m, index) in markers" :position="m.position" :clickable="true"
            :draggable="true" @click="center=m.position" /> -->
        </GmapMap>
      </v-card-text>
      <v-card-actions>
        <v-spacer></v-spacer>
          <v-btn text class="mr-3" @click="addFarmDialog = false">Cancel</v-btn>
          <v-btn text color="secondary" class="mr-3" @click="addFarmDialog = false">Save</v-btn>
      </v-card-actions>
    </v-card>
  </v-dialog>

</section>